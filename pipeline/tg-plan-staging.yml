---
trigger:
  branches:
    exclude:
    - main
  # The following is set manually via the ADO UI as it isn't working for a yet unknown reason
  # paths:
  #   include:
  #   - environments/staging

pr: none

jobs:
  - template: templates/terragrunt_job.yml
    parameters:
      environment: staging
      module: applications
      subscription: "Azure Pipeline: Large and Complex Cases - Pre-Prod" #service principal
      agentPool: 'LaCC PreProd Pool'
      variableGroupName: 'lacc-infra-tfvars-staging'

  - template: templates/terragrunt_job.yml
    parameters:
      environment: staging
      module: base
      subscription: "Azure Pipeline: Large and Complex Cases - Pre-Prod" #service principal
      agentPool: 'LaCC PreProd Pool'
